## 1. 简介
本应用是基于Maix系列硬件（MaixCam/Pro/MaixCam2）开发的相机控制程序，集成了拍照、录像、参数调节等核心功能，适配不同分辨率的摄像头传感器，支持音视频同步录制、参数自定义配置等特性，可满足日常拍摄、延时摄影等多样化的使用需求。

## 2. 主要功能
| 功能分类 | 具体能力 |
|----------|----------|
| 基础拍摄 | 支持一键拍照，可设置拍照延时（单位：秒）；支持照片自动按日期分类存储，生成缩略图便于预览 |
| 视频录制 | 支持H.264格式视频录制，音视频同步；可自定义视频码率，适配不同分辨率的码率自动推荐 |
| 参数调节 | 快门：支持自动/手动模式，手动模式可自定义快门值<br>ISO：支持自动/手动模式，范围100~800<br>曝光补偿（EV）：支持自动/手动调节<br>白平衡（WB）：支持自动/手动调节<br>分辨率：支持3840×2160、2560×1440、1920×1080等多档位切换 |
| 辅助功能 | 补光灯控制：支持开启/关闭硬件补光灯<br>延时摄影：可设置延时秒数，开启后自动按间隔录制视频（关闭音频）<br>对焦：支持手动对焦区域设置<br>时间戳：支持在画面中显示当前时间<br>RAW格式：支持开启/关闭RAW格式照片保存 |

## 3. 使用说明
### 3.1 基础操作
#### 3.1.1 拍照
1. 进入应用后，默认进入预览界面；
2. 可先设置拍照延时（可选，0秒为立即拍摄）；
3. 点击拍照按钮，若设置了延时，界面会显示延时动画，延时结束后自动完成拍照；
4. 照片会自动保存至「图片存储目录/当前日期/序号.jpg」路径，同时生成缩略图供预览。

#### 3.1.2 视频录制
1. 点击录制开始按钮，应用自动准备录制环境并开始录制，界面显示录制时长；
2. 录制过程中可查看实时录制时间，支持根据分辨率自动适配推荐码率，也可手动修改码率（非录制状态下）；
3. 点击停止按钮，录制结束，视频自动保存至「视频存储目录/当前日期/序号.mp4」路径。

### 3.2 参数配置
#### 3.2.1 分辨率切换
1. 在参数设置界面选择分辨率档位，确认后应用会自动重启相机并加载新分辨率；
2. 分辨率档位受硬件传感器限制，超出传感器最大尺寸的档位会被禁用。

#### 3.2.2 快门/ISO调节
- 自动模式：勾选「自动」选项，相机会根据环境自动调节快门/ISO；
- 手动模式：取消「自动」勾选，输入目标快门值（单位：秒）/ISO值，确认后立即生效。

#### 3.2.3 辅助功能开关
- 补光灯：点击补光灯按钮，切换开启/关闭状态；
- 时间戳：点击时间戳按钮，开启后画面左下角显示当前日期时间；
- 延时摄影：设置延时秒数（0为关闭，>0为固定间隔，<0为自动模式），开启后录制视频时自动关闭音频；
- RAW格式：点击RAW按钮，开启后拍照会同时保存RAW格式文件（后缀.raw）。

### 3.3 预览与查看
1. 拍照完成后，界面会自动显示刚拍摄的照片缩略图和预览图；
2. 点击「查看照片」按钮，可浏览已拍摄的照片。

## 4. 注意事项
1. 分辨率切换：切换分辨率时，应用会重启相机模块，期间预览会短暂中断，属于正常现象；
2. 码率修改：仅在非录制状态下可修改码率，录制过程中修改码率会提示「视频忙」且不生效；
3. 延时摄影：开启延时摄影后，音频会自动关闭，关闭延时摄影后需手动重新开启音频；
4. RAW格式：开启RAW格式后，照片保存体积会增大，且需要专用软件解析；
5. 补光灯：补光灯的硬件引脚默认配置为GPIOB3，可通过设备配置文件修改引脚映射；
6. 存储路径：照片/视频默认按日期分目录存储，需确保存储设备有足够空间，否则会保存失败；
7. 音视频同步：录制视频时，若出现音频卡顿，可检查音频采样率配置（默认48000Hz）。

## 5. 更多介绍
### 5.1 硬件适配
- 支持MaixCam、MaixCam2两款硬件平台，MaixCam2支持更高码率（最高100Mbps）和AI-ISP功能；
- 补光灯引脚可通过设备配置文件中的「cam_light_io」参数自定义，默认B3引脚；
- 摄像头传感器最大分辨率决定可选分辨率档位，适配前需确认硬件传感器规格。

### 5.2 存储说明
- 照片默认存储路径：应用指定的图片目录（可通过系统接口修改）；
- 视频默认存储路径：应用指定的视频目录（可通过系统接口修改）；
- 所有文件保存后会执行「sync」操作，确保数据写入存储设备，避免断电丢失。

### 5.3 性能说明
- 预览帧率默认30fps，分辨率越高，预览/录制的系统资源占用越大；
- 延时摄影模式下，视频帧率仍为30fps，仅按设置的间隔推送帧数据，适合长时间低帧率录制场景。

### 5.4 源码
- [源码](https://github.com/sipeed/MaixCDK/tree/main/projects/app_camera)