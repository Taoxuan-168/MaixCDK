## 1. 简介
本工具是基于MaixCam系列硬件开发的摄像头UVC推流应用，能够将设备摄像头采集的视频画面以MJPG格式通过UVC（USB视频类）协议对外输出，支持本地显示屏状态展示与触控屏快捷退出操作，适用于需要将MaixCam设备作为USB摄像头使用的场景。

## 2. 主要功能
- 摄像头采集：自动初始化1280×720分辨率、RGB888格式的摄像头画面，帧率最高60fps；
- UVC推流：满足条件时自动启动UVC服务，将摄像头画面封装为MJPG格式对外推送，支持第三方工具（如Guvcview）接收；
- 本地显示：在设备显示屏上展示UVC服务状态、启用提示或错误信息；
- 快捷退出：通过触控屏左上角区域的点击操作，可快速退出程序；
- 日志输出：实时输出帧率、数据量、各环节耗时等运行日志，便于调试和状态监控。

## 3. 使用说明
### 3.1 前置准备
1. 确保Maix设备已安装对应固件，且摄像头模块正常连接并驱动；
2. 确认在「应用设置/USB设置/UVC」中开启UVC功能。

### 3.2 运行程序
1. 启动程序，程序会自动完成以下操作：
   - 加载并显示初始图片；
   - 初始化摄像头并尝试启动UVC服务；
   - 在显示屏上显示UVC启动成功/未启用的提示信息。

### 3.3 接收UVC视频流
1. 若UVC启动成功，将Maix设备通过USB连接至电脑；
2. 在电脑端打开支持MJPG格式的视频采集工具（如Guvcview）；
3. 在工具中选择对应的USB摄像头设备，并切换至MJPG视频通道，即可看到Maix设备摄像头采集的画面（画面中会显示帧尺寸、帧计数等信息）。

### 3.4 退出程序
- 触摸设备显示屏左上角（40+60像素宽度、40像素高度范围内），程序会自动停止UVC服务并退出；

## 4. 注意事项
1. 兼容性：Ubuntu系统下的Cheese工具与本程序的UVC推流不兼容，推荐使用Guvcview工具接收视频流；
2. 文件依赖：必须确「应用设置/USB设置/UVC」中开启UVC功能，否则UVC服务无法启动，程序会提示需先启用UVC功能；
3. 帧率与性能：程序默认配置摄像头60fps采集，若设备性能不足，可修改代码中摄像头初始化的帧率参数（60）降低负载。

1. 日志信息：程序运行过程中会输出帧计数、单帧耗时、帧率、数据字节数等日志，可通过终端查看，用于排查帧率过低、推流卡顿等问题；
2. 画面自定义：可修改代码中 `draw_string` 相关代码，自定义显示屏或推流画面中显示的文字内容、颜色、大小；
3. 分辨率调整：若需要调整推流分辨率，可修改代码中摄像头初始化的宽高参数（1280, 720），但需确保摄像头支持对应分辨率；
4. 调试模式：代码中保留了帧数据保存为jpg文件的注释代码（`#if 0` 块），取消注释后，程序会将每帧MJPG数据保存至 `/root/res/` 目录，便于调试视频流数据问题（需确保该目录存在）。

## 5. 更多介绍
[源码](https://github.com/sipeed/MaixCDK/tree/main/projects/app_uvc_camera)